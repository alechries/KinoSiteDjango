{% extends 'adminLte/base.html' %}
{% load crispy_forms_tags %}
{% load static %}
{% block scripts %}
<script src="{% static 'admin/js/filepreview.js' %}"></script>
<script>
tinymce.init({selector:'#PromotionTextInput'});
handleFileSelectSet('PromotionMainImage', 'output')
handleFileSelectSet('PromoImage', 'output1')
handleFileSelectSet('PromoImage1', 'output2')
handleFileSelectSet('PromoImage2', 'output3')
handleFileSelectSet('PromoImage3', 'output4')
handleFileSelectSet('PromoImage4', 'output5')
</script>
{% endblock %}
{% block promotion %}
    <li class="nav-item">
        <a href="{% url 'admin_promotion_list' %}" class="nav-link active">
              <i class="fas fa-percent"></i>
              <p>
                  Акции
              </p>
        </a>
    </li>
{% endblock %}
{% block content_title %}
{% endblock %}
{% block main_content %}
 <div class="features flex-fill">
        <div class="row m-3">
            <div class="container">

                <form method="POST" enctype="multipart/form-data">
                    {% csrf_token %}
                    <div class="form-row">
                        <div class="form-group col-md-6">
                            <label for="PromotionNameInput"><h4>Название акции</h4></label>
                            <div class="col-md-6" id="promotionNameInput">
                                {{ form.promo_name }}
                            </div>
                        </div>
                        <div class="form-group col-md-4">
                            <label for="PromotionStatus"><h4>Статус акции</h4></label>
                            <div class=" col-md-4" id="promotionStatus" >
                                {{ form.promo_status|as_crispy_field }}
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="PromotionTextInput"><h4>Описание акции</h4></label>
                        {{ form.promo_description }}
                    </div>
                    <div class="form-group">
                        <label for="PromotionMainImage"><h4>Главная акции</h4></label>
                        <div class="card col-md-2">
                        <div class="form-group" style="text-align: center">
                            {% if main_image %}
                                <img src="{{ main_image }}" class="card-img-top" alt="film_image" style="padding-top: 7px;">
                            {% endif %}
                            <div class="fileUpload btn btn-secondary">
                                <span>Загрузить</span>
                                {{ form.promo_main_image }}
                            </div>
                            <div class="row">
                                 <span id="output"></span>
                            </div>
                        </div>
                    </div>
                    <label for="FilmGallery"><h4>Галерея акции</h4></label>
                        <div class="container d-flex justify-content-between" id="FilmGallery">
                            <div class="card col-md-2">
                                <div class="card-body" style="padding: 0px">
                                    {% if image1 %}
                                        <img src="{{ image1 }}" class="card-img-top" alt="film_image" style="padding-top:7px">
                                    {% endif %}
                                    <div class="fileUpload btn btn-secondary">
                                        <span>Загрузить</span>
                                        {{ form.promo_image1 }}
                                    </div>
                                    <div class="row">
                                         <span id="output1"></span>
                                    </div>
                                </div>
                            </div>
                            <div class="card col-md-2">
                                <div class="card-body" style="padding: 0px">
                                    {% if image2 %}
                                        <img src="{{ image2 }}" class="card-img-top" alt="film_image" style="padding-top:7px">
                                    {% endif %}
                                    <div class="fileUpload btn btn-secondary">
                                        <span>Загрузить</span>
                                        {{ form.promo_image2 }}
                                    </div>
                                    <div class="row">
                                        <span id="output2"></span>
                                    </div>
                                </div>
                            </div>
                            <div class="card col-md-2">
                                <div class="card-body" style="padding: 0px">
                                    {% if image3 %}
                                        <img src="{{ image3 }}" class="card-img-top" alt="film_image" style="padding-top:7px">
                                    {% endif %}
                                    <div class="fileUpload btn btn-secondary">
                                        <span>Загрузить</span>
                                        {{ form.promo_image3 }}
                                    </div>
                                    <div class="row">
                                        <span id="output3"></span>
                                    </div>
                                </div>
                            </div>
                            <div class="card col-md-2">
                                <div class="card-body" style="padding: 0px">
                                    {% if image4 %}
                                        <img src="{{ image4 }}" class="card-img-top" alt="film_image" style="padding-top:7px">
                                    {% endif %}
                                    <div class="fileUpload btn btn-secondary">
                                        <span>Загрузить</span>
                                        {{ form.promo_image4 }}
                                    </div>
                                    <div class="row">
                                        <span id="output4"></span>
                                    </div>
                                </div>
                            </div>
                            <div class="card col-md-2">
                                <div class="card-body" style="padding: 0px">
                                    {% if image5 %}
                                        <img src="{{ image5 }}" class="card-img-top" alt="film_image" style="padding-top:7px">
                                    {% endif %}
                                    <div class="fileUpload btn btn-secondary">
                                        <span>Загрузить</span>
                                        {{ form.promo_image5 }}
                                    </div>
                                    <div class="row">
                                        <span id="output5"></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        </div>
                    <div class="col-lg-6 my-3 pl-0">
                        <label for="PromotionUrl"><h4>Ссылка на новость</h4></label>
                        {{ form.promo_url }}
                    </div>
                    <div class="col-lg-6 my-3 pl-0">
                        <label for="PromotionPublishedDate"><h4>Дата публикации</h4></label>
                        {{ form.promo_published_date }}
                    </div>
                    <label><h4>SEO</h4></label>
                    <div class="col-md-3">
                        {% if instance_seo_id %}
                        <a href="{% url 'admin_seo' pk=instance_seo_id%}" class="btn btn-secondary">Настроить</a>
                        {% else %}
                        В данный момент нельзя настроить SEO. Сохраните изменения и попробуйте снова.
                        {% endif %}
                    </div>
                    <div class="container my-5">
                        <button class="btn btn-success" type="submit">Сохранить</button>
                        <a class="btn btn-danger" href="{% url 'admin_promotion_list' %}" role="button">Отмена</a>
                    </div>
                </form>
            </div>
        </div>
 </div>
{% endblock %}